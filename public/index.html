<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>varn.agency — Deployed via GitHub Actions</title>
  <style>
    :root { --bg1:#0f172a; --bg2:#1e293b; --card:#0b1220; --text:#e6edf3; --muted:#94a3b8; --accent:#60a5fa; }
    * { box-sizing: border-box }
    html, body { height: 100%; margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; color: var(--text); background: radial-gradient(1200px 800px at 20% 10%, #0b1220 0, var(--bg1) 40%, var(--bg2) 100%); }
    .wrap { min-height: 100%; display: grid; place-items: center; padding: 24px; }
    .card { width: 100%; max-width: 820px; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; padding: 28px; box-shadow: 0 20px 60px rgba(0,0,0,0.45); backdrop-filter: blur(6px); }
    h1 { margin: 0 0 12px; font-size: clamp(24px, 4vw, 36px); letter-spacing: .3px; }
    p { margin: 8px 0; color: var(--muted); }
    .ok { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; background: rgba(34,197,94,0.18); border: 1px solid rgba(34,197,94,0.35); color: #86efac; font-weight: 600; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px; }
    .tile { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 14px 16px; }
    .k { color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: .12em; }
    .v { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 14px; margin-top: 6px; word-break: break-all; }
    .footer { margin-top: 18px; font-size: 13px; color: var(--muted); }
    @media (max-width:700px){ .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="ok">✅ Deployed via GitHub Actions</div>
      <h1>varn.agency</h1>
      <p>This page proves your CI → server → Nginx pipeline works. Commit → push → auto-sync to your server.</p>

      <div class="grid">
        <div class="tile">
          <div class="k">Latest commit</div>
          <div id="commit" class="v">loading…</div>
        </div>
        <div class="tile">
          <div class="k">Deployed (UTC)</div>
          <div id="time" class="v">loading…</div>
        </div>
        <div class="tile">
          <div class="k">Origin check</div>
          <div class="v"><code>__health.json</code> fetched from your server. If this shows data, caching/CDN isn’t lying.</div>
        </div>
        <div class="tile">
          <div class="k">Where this lives</div>
          <div class="v"><code>/srv/www/varn.agency/current/public/index.html</code></div>
        </div>
      </div>

      <div class="footer">Edit this file locally, push to <code>main</code>. The page should update in ~seconds.</div>
    </div>
  </div>

  <script>
    (async () => {
      try {
        const r = await fetch('/__health.json', {cache: 'no-store'});
        if (!r.ok) throw new Error('health not ok');
        const { commit, time } = await r.json();
        const short = commit ? commit.substring(0, 7) : '(none)';
        document.getElementById('commit').textContent = short;
        document.getElementById('time').textContent = time || '(unknown)';
      } catch (e) {
        document.getElementById('commit').textContent = '(no health file yet)';
        document.getElementById('time').textContent = '(no health file yet)';
      }
    })();
  </script>
</body>
</html>
